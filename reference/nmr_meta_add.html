<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add metadata to an nmr_dataset object — nmr_meta_add • AlpsNMR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add metadata to an nmr_dataset object — nmr_meta_add" />
<meta property="og:description" content="This is useful to add metadata to datasets that can be later used for
plotting spectra or further analysis (PCA...)." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AlpsNMR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.3.3.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction-to-alpsnmr.html">Introduction to AlpsNMR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add metadata to an nmr_dataset object</h1>
    
    <div class="hidden name"><code>nmr_meta_add.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is useful to add metadata to datasets that can be later used for
plotting spectra or further analysis (PCA...).</p>
    </div>

    <pre class="usage"><span class='fu'>nmr_meta_add</span>(<span class='no'>nmr_data</span>, <span class='no'>metadata</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"NMRExperiment"</span>)

<span class='fu'>nmr_meta_add_tidy_excel</span>(<span class='no'>nmr_data</span>, <span class='no'>excel_file</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nmr_data</th>
      <td><p>an <a href='nmr_dataset_family.html'>nmr_dataset_family</a> object</p></td>
    </tr>
    <tr>
      <th>metadata</th>
      <td><p>A data frame with metadata to add</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>A column name of both the <code>nmr_data$metadata$external</code> and the metadata
data.frame. If you want to merge two columns with different headers you can
use a named character vector <code><a href='https://rdrr.io/r/base/c.html'>c("NMRExperiment" = "ExperimentNMR")</a></code> where
the left side is the column name of the <code>nmr_data$metadata$external</code> and the right side is
the column name of the metadata data frame.</p></td>
    </tr>
    <tr>
      <th>excel_file</th>
      <td><p>Path to a tidy Excel file name. The Excel can consist
of multiple sheets, that are added sequentially. The first column of the first
sheet MUST be named as one of the metadata already present in the dataset,
typically will be "NMRExperiment". The rest of the columns of the first sheet
can be named at will. Similary, the first column of the second sheet must be
named as one of the metadata already present in the dataset, typically
"NMRExperiment" or any of the columns of the first sheet. The rest of the columns
of the second sheet can be named at will. See the package vignette for an
example.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The nmr_dataset_family object with the added metadata</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other metadata functions: <code><a href='nmr_meta_export.html'>nmr_meta_export</a></code>,
  <code><a href='nmr_meta_get_column.html'>nmr_meta_get_column</a></code>,
  <code><a href='nmr_meta_get.html'>nmr_meta_get</a></code>,
  <code><a href='pipe_add_metadata.html'>pipe_add_metadata</a></code></p>
<p>Other nmr_dataset functions: <code><a href='sub-.nmr_dataset.html'>[.nmr_dataset</a></code>,
  <code><a href='load_and_save_functions.html'>load_and_save_functions</a></code>,
  <code><a href='new_nmr_dataset.html'>new_nmr_dataset</a></code>,
  <code><a href='nmr_interpolate_1D.html'>nmr_interpolate_1D</a></code>,
  <code><a href='nmr_meta_export.html'>nmr_meta_export</a></code>,
  <code><a href='nmr_meta_get_column.html'>nmr_meta_get_column</a></code>,
  <code><a href='nmr_meta_get.html'>nmr_meta_get</a></code>,
  <code><a href='nmr_ppm_resolution.html'>nmr_ppm_resolution</a></code>,
  <code><a href='nmr_read_samples.html'>nmr_read_samples</a></code>,
  <code><a href='validate_nmr_dataset.html'>validate_nmr_dataset</a></code></p>
<p>Other nmr_dataset_1D functions: <code><a href='Automatic_targeted_profiling.html'>Automatic_targeted_profiling</a></code>,
  <code><a href='sub-.nmr_dataset_1D.html'>[.nmr_dataset_1D</a></code>,
  <code><a href='computes_peak_width_ppm.html'>computes_peak_width_ppm</a></code>,
  <code><a href='files_to_rDolphin_blood.html'>files_to_rDolphin_blood</a></code>,
  <code><a href='files_to_rDolphin_cell.html'>files_to_rDolphin_cell</a></code>,
  <code><a href='files_to_rDolphin_urine.html'>files_to_rDolphin_urine</a></code>,
  <code><a href='get_integration_with_metadata.html'>get_integration_with_metadata</a></code>,
  <code><a href='is.nmr_dataset_1D.html'>is.nmr_dataset_1D</a></code>,
  <code><a href='load_and_save_functions.html'>load_and_save_functions</a></code>,
  <code><a href='new_nmr_dataset_1D.html'>new_nmr_dataset_1D</a></code>,
  <code><a href='nmr_align_find_ref.html'>nmr_align_find_ref</a></code>,
  <code><a href='nmr_align.html'>nmr_align</a></code>,
  <code><a href='nmr_baseline_removal.html'>nmr_baseline_removal</a></code>,
  <code><a href='nmr_baseline_threshold.html'>nmr_baseline_threshold</a></code>,
  <code><a href='nmr_detect_peaks_plot.html'>nmr_detect_peaks_plot</a></code>,
  <code><a href='nmr_detect_peaks_tune_snr.html'>nmr_detect_peaks_tune_snr</a></code>,
  <code><a href='nmr_detect_peaks.html'>nmr_detect_peaks</a></code>,
  <code><a href='nmr_exclude_region.html'>nmr_exclude_region</a></code>,
  <code><a href='nmr_integrate_peak_positions.html'>nmr_integrate_peak_positions</a></code>,
  <code><a href='nmr_integrate_regions.html'>nmr_integrate_regions</a></code>,
  <code><a href='nmr_interpolate_1D.html'>nmr_interpolate_1D</a></code>,
  <code><a href='nmr_meta_export.html'>nmr_meta_export</a></code>,
  <code><a href='nmr_meta_get_column.html'>nmr_meta_get_column</a></code>,
  <code><a href='nmr_meta_get.html'>nmr_meta_get</a></code>, <code><a href='nmr_normalize.html'>nmr_normalize</a></code>,
  <code><a href='nmr_pca_build_model.html'>nmr_pca_build_model</a></code>,
  <code><a href='nmr_pca_outliers_filter.html'>nmr_pca_outliers_filter</a></code>,
  <code><a href='nmr_pca_outliers_plot.html'>nmr_pca_outliers_plot</a></code>,
  <code><a href='nmr_pca_outliers_robust.html'>nmr_pca_outliers_robust</a></code>,
  <code><a href='nmr_pca_outliers.html'>nmr_pca_outliers</a></code>,
  <code><a href='nmr_ppm_resolution.html'>nmr_ppm_resolution</a></code>,
  <code><a href='plot.nmr_dataset_1D.html'>plot.nmr_dataset_1D</a></code>,
  <code><a href='plot_webgl.html'>plot_webgl</a></code>, <code><a href='rdCV_PLS_RF_ML.html'>rdCV_PLS_RF_ML</a></code>,
  <code><a href='rdCV_PLS_RF.html'>rdCV_PLS_RF</a></code>,
  <code><a href='save_files_to_rDolphin.html'>save_files_to_rDolphin</a></code>,
  <code><a href='to_ASICS.html'>to_ASICS</a></code>, <code><a href='to_ChemoSpec.html'>to_ChemoSpec</a></code>,
  <code><a href='to_rDolphin.html'>to_rDolphin</a></code>,
  <code><a href='validate_nmr_dataset_1D.html'>validate_nmr_dataset_1D</a></code></p>
<p>Other nmr_dataset_peak_table functions: <code><a href='sub-.nmr_dataset_peak_table.html'>[.nmr_dataset_peak_table</a></code>,
  <code><a href='is.nmr_dataset_peak_table.html'>is.nmr_dataset_peak_table</a></code>,
  <code><a href='load_and_save_functions.html'>load_and_save_functions</a></code>,
  <code><a href='new_nmr_dataset_peak_table.html'>new_nmr_dataset_peak_table</a></code>,
  <code><a href='nmr_meta_export.html'>nmr_meta_export</a></code>,
  <code><a href='nmr_meta_get_column.html'>nmr_meta_get_column</a></code>,
  <code><a href='nmr_meta_get.html'>nmr_meta_get</a></code>,
  <code><a href='validate_nmr_dataset_peak_table.html'>validate_nmr_dataset_peak_table</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Load a demo dataset with four samples:</span>
<span class='no'>dataset</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"dataset-demo"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"AlpsNMR"</span>)
<span class='no'>nmr_dataset</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='nmr_read_samples.html'>nmr_read_samples_dir</a></span>(<span class='no'>dataset</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(NMRExperiment, file_format, sample_path, dimension, </span>
#&gt; <span class='warning'>    pulse_sequence, nuclei, acq_datetime))`, with `mutate()` if needed</span></div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(TITLE, JCAMPDX, DATATYPE, NPOINTS, ORIGIN, OWNER, ACQT0, </span>
#&gt; <span class='warning'>    ANAVPT, AQSEQ, AQ_mod, AUNM, AUTOPOS, BF1, BF2, BF3, BF4, </span>
#&gt; <span class='warning'>    BF5, BF6, BF7, BF8, BYTORDA, CHEMSTR, CPDPRG, DATE, DE, DECBNUC, </span>
#&gt; <span class='warning'>    DECIM, DECNUC, DECSTAT, DIGMOD, DIGTYP, DQDMODE, DR, DS, </span>
#&gt; <span class='warning'>    DSPFIRM, DSPFVS, DTYPA, EXP, FL1, FL2, FL3, FL4, FOV, FQ1LIST, </span>
#&gt; <span class='warning'>    FQ2LIST, FQ3LIST, FQ4LIST, FQ5LIST, FQ6LIST, FQ7LIST, FQ8LIST, </span>
#&gt; <span class='warning'>    FRQLO3, FRQLO3N, FTLPGN, FW, FnILOOP, FnMODE, FnTYPE, GPNAM, </span>
#&gt; <span class='warning'>    GRDPROG, GRPDLY, HDDUTY, HDRATE, HL1, HL2, HL3, HL4, HOLDER, </span>
#&gt; <span class='warning'>    HPPRGN, INSTRUM, LFILTER, LGAIN, LINPSTP, LOCKED, LOCKFLD, </span>
#&gt; <span class='warning'>    LOCKGN, LOCKPOW, LOCKPPM, LOCNUC, LOCPHAS, LOCSHFT, LOCSW, </span>
#&gt; <span class='warning'>    LTIME, MASR, MASRLST, NBL, NC, NLOGCH, NOVFLW, NS, NUC1, </span>
#&gt; <span class='warning'>    NUC2, NUC3, NUC4, NUC5, NUC6, NUC7, NUC8, NUCLEUS, NUSLIST, </span>
#&gt; <span class='warning'>    NusAMOUNT, NusFPNZ, NusJSP, NusSEED, NusSPTYPE, NusT2, NusTD, </span>
#&gt; <span class='warning'>    O1, O2, O3, O4, O5, O6, O7, O8, OVERFLW, PAPS, PARMODE, PHLIST, </span>
#&gt; <span class='warning'>    PHP, PH_ref, PLSTEP, PLSTRT, PQPHASE, PQSCALE, PR, PRGAIN, </span>
#&gt; <span class='warning'>    PROBHD, PULPROG, PW, PYNM, ProjAngle, QNP, RD, RECPH, RG, </span>
#&gt; <span class='warning'>    RO, SFO1, SFO2, SFO3, SFO4, SFO5, SFO6, SFO7, SFO8, SOLVENT, </span>
#&gt; <span class='warning'>    SOLVOLD, SPECTR, SPINCNT, SPNAM, SUBNAM, SW, SW_h, SWfinal, </span>
#&gt; <span class='warning'>    SigLockShift, TD, TD0, TDav, TE, TE1, TE2, TE3, TE4, TEG, </span>
#&gt; <span class='warning'>    TE_MAGNET, TE_PIDX, TUBE_TYPE, USERA1, USERA2, USERA3, USERA4, </span>
#&gt; <span class='warning'>    USERA5, V9, VALIDCODE, VALIST, VCLIST, VDLIST, VPLIST, VTLIST, </span>
#&gt; <span class='warning'>    WBST, WBSW, XL, YL, YMAX_a, YMIN_a, ZGOPTNS, ZL1, ZL2, ZL3, </span>
#&gt; <span class='warning'>    ZL4))`, with `mutate()` if needed</span></div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(TITLE, JCAMPDX, DATATYPE, NPOINTS, ORIGIN, OWNER, ABSF1, </span>
#&gt; <span class='warning'>    ABSF2, ABSG, ABSL, ALPHA, AQORDER, ASSFAC, ASSFACI, ASSFACX, </span>
#&gt; <span class='warning'>    ASSWID, AUNMP, AXLEFT, AXNAME, AXNUC, AXRIGHT, AXTYPE, AXUNIT, </span>
#&gt; <span class='warning'>    AZFE, AZFW, BCFW, BC_mod, BYTORDP, COROFFS, CY, DATMOD, DC, </span>
#&gt; <span class='warning'>    DFILT, DTYPP, ERETIC, F1P, F2P, FCOR, FTSIZE, FT_mod, GAMMA, </span>
#&gt; <span class='warning'>    GB, INTBC, INTSCL, ISEN, LB, LEV0, LPBIN, MAXI, MC2, MEAN, </span>
#&gt; <span class='warning'>    ME_mod, MI, MddCEXP, MddCT_SP, MddF180, MddLAMBDA, MddMEMORY, </span>
#&gt; <span class='warning'>    MddMERGE, MddNCOMP, MddNITER, MddNOISE, MddPHASE, MddSEED, </span>
#&gt; <span class='warning'>    MddSRSIZE, Mdd_CsALG, Mdd_CsLAMBDA, Mdd_CsNITER, Mdd_CsNORM, </span>
#&gt; <span class='warning'>    Mdd_CsVE, Mdd_CsZF, Mdd_LrLAMBDA, Mdd_LrNITER, Mdd_LrRANK, </span>
#&gt; <span class='warning'>    Mdd_LrZF, Mdd_mod, NCOEF, NC_proc, NLEV, NOISF1, NOISF2, </span>
#&gt; <span class='warning'>    NSP, NTH_PI, NZP, OFFSET, PC, PHC0, PHC1, PH_mod, PKNL, PPARMOD, </span>
#&gt; <span class='warning'>    PPDIAG, PPIPTYP, PPMPNUM, PPRESOL, PSCAL, PSIGN, PYNMP, RDF1, </span>
#&gt; <span class='warning'>    RDF2, RDFWHM, RDINT, RDPOS, REVERSE, SF, SI, SIGF1, SIGF2, </span>
#&gt; <span class='warning'>    SINO, SIOLD, SPECTYP, SREF_mod, SREGLST, SSB, STSI, STSR, </span>
#&gt; <span class='warning'>    SW_p, SYMM, S_DEV, TDeff, TDoff, TI, TILT, TM1, TM2, TOPLEV, </span>
#&gt; <span class='warning'>    USERP1, USERP2, USERP3, USERP4, USERP5, WDW, XDIM, YMAX_p, </span>
#&gt; <span class='warning'>    YMIN_p))`, with `mutate()` if needed</span></div><div class='input'>
<span class='co'># At first we just have the NMRExperiment column</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='nmr_meta_get.html'>nmr_meta_get</a></span>(<span class='no'>nmr_dataset</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='st'>"external"</span>))</div><div class='output co'>#&gt; # A tibble: 4 x 1
#&gt;   NMRExperiment
#&gt;   &lt;chr&gt;        
#&gt; 1 10           
#&gt; 2 20           
#&gt; 3 30           
#&gt; 4 40           </div><div class='input'><span class='co'># Get a table with NMRExperiment -&gt; SubjectID</span>
<span class='no'>dummy_metadata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"dataset-demo"</span>, <span class='st'>"dummy_metadata.xlsx"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"AlpsNMR"</span>)
<span class='no'>NMRExp_SubjID</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>readxl</span><span class='kw ns'>::</span><span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span>(<span class='no'>dummy_metadata</span>, <span class='kw'>sheet</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>NMRExp_SubjID</span>)</div><div class='output co'>#&gt; # A tibble: 4 x 3
#&gt;   NMRExperiment SubjectID TimePoint
#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 10            Ana       baseline 
#&gt; 2 20            Ana       3 months 
#&gt; 3 30            Elia      baseline 
#&gt; 4 40            Elia      3 months </div><div class='input'><span class='co'># We can link the SubjectID column of the first excel into the dataset</span>
<span class='no'>nmr_dataset</span> <span class='kw'>&lt;-</span> <span class='fu'>nmr_meta_add</span>(<span class='no'>nmr_dataset</span>, <span class='no'>NMRExp_SubjID</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"NMRExperiment"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='nmr_meta_get.html'>nmr_meta_get</a></span>(<span class='no'>nmr_dataset</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='st'>"external"</span>))</div><div class='output co'>#&gt; # A tibble: 4 x 3
#&gt;   NMRExperiment SubjectID TimePoint
#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 10            Ana       baseline 
#&gt; 2 20            Ana       3 months 
#&gt; 3 30            Elia      baseline 
#&gt; 4 40            Elia      3 months </div><div class='input'><span class='co'># The second excel can use the SubjectID:</span>
<span class='no'>SubjID_Age</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>readxl</span><span class='kw ns'>::</span><span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span>(<span class='no'>dummy_metadata</span>, <span class='kw'>sheet</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>SubjID_Age</span>)</div><div class='output co'>#&gt; # A tibble: 2 x 2
#&gt;   SubjectID   Age
#&gt;   &lt;chr&gt;     &lt;dbl&gt;
#&gt; 1 Ana          29
#&gt; 2 Elia          0</div><div class='input'><span class='co'># Add the metadata by its SubjectID:</span>
<span class='no'>nmr_dataset</span> <span class='kw'>&lt;-</span> <span class='fu'>nmr_meta_add</span>(<span class='no'>nmr_dataset</span>, <span class='no'>SubjID_Age</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"SubjectID"</span>)
<span class='co'># The final loaded metadata:</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='nmr_meta_get.html'>nmr_meta_get</a></span>(<span class='no'>nmr_dataset</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='st'>"external"</span>))</div><div class='output co'>#&gt; # A tibble: 4 x 4
#&gt;   NMRExperiment SubjectID TimePoint   Age
#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;
#&gt; 1 10            Ana       baseline     29
#&gt; 2 20            Ana       3 months     29
#&gt; 3 30            Elia      baseline      0
#&gt; 4 40            Elia      3 months      0</div><div class='input'>
<span class='co'># Read a tidy excel file:</span>

<span class='no'>dataset</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"dataset-demo"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"AlpsNMR"</span>)
<span class='no'>nmr_dataset</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='nmr_read_samples.html'>nmr_read_samples_dir</a></span>(<span class='no'>dataset</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(NMRExperiment, file_format, sample_path, dimension, </span>
#&gt; <span class='warning'>    pulse_sequence, nuclei, acq_datetime))`, with `mutate()` if needed</span></div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(TITLE, JCAMPDX, DATATYPE, NPOINTS, ORIGIN, OWNER, ACQT0, </span>
#&gt; <span class='warning'>    ANAVPT, AQSEQ, AQ_mod, AUNM, AUTOPOS, BF1, BF2, BF3, BF4, </span>
#&gt; <span class='warning'>    BF5, BF6, BF7, BF8, BYTORDA, CHEMSTR, CPDPRG, DATE, DE, DECBNUC, </span>
#&gt; <span class='warning'>    DECIM, DECNUC, DECSTAT, DIGMOD, DIGTYP, DQDMODE, DR, DS, </span>
#&gt; <span class='warning'>    DSPFIRM, DSPFVS, DTYPA, EXP, FL1, FL2, FL3, FL4, FOV, FQ1LIST, </span>
#&gt; <span class='warning'>    FQ2LIST, FQ3LIST, FQ4LIST, FQ5LIST, FQ6LIST, FQ7LIST, FQ8LIST, </span>
#&gt; <span class='warning'>    FRQLO3, FRQLO3N, FTLPGN, FW, FnILOOP, FnMODE, FnTYPE, GPNAM, </span>
#&gt; <span class='warning'>    GRDPROG, GRPDLY, HDDUTY, HDRATE, HL1, HL2, HL3, HL4, HOLDER, </span>
#&gt; <span class='warning'>    HPPRGN, INSTRUM, LFILTER, LGAIN, LINPSTP, LOCKED, LOCKFLD, </span>
#&gt; <span class='warning'>    LOCKGN, LOCKPOW, LOCKPPM, LOCNUC, LOCPHAS, LOCSHFT, LOCSW, </span>
#&gt; <span class='warning'>    LTIME, MASR, MASRLST, NBL, NC, NLOGCH, NOVFLW, NS, NUC1, </span>
#&gt; <span class='warning'>    NUC2, NUC3, NUC4, NUC5, NUC6, NUC7, NUC8, NUCLEUS, NUSLIST, </span>
#&gt; <span class='warning'>    NusAMOUNT, NusFPNZ, NusJSP, NusSEED, NusSPTYPE, NusT2, NusTD, </span>
#&gt; <span class='warning'>    O1, O2, O3, O4, O5, O6, O7, O8, OVERFLW, PAPS, PARMODE, PHLIST, </span>
#&gt; <span class='warning'>    PHP, PH_ref, PLSTEP, PLSTRT, PQPHASE, PQSCALE, PR, PRGAIN, </span>
#&gt; <span class='warning'>    PROBHD, PULPROG, PW, PYNM, ProjAngle, QNP, RD, RECPH, RG, </span>
#&gt; <span class='warning'>    RO, SFO1, SFO2, SFO3, SFO4, SFO5, SFO6, SFO7, SFO8, SOLVENT, </span>
#&gt; <span class='warning'>    SOLVOLD, SPECTR, SPINCNT, SPNAM, SUBNAM, SW, SW_h, SWfinal, </span>
#&gt; <span class='warning'>    SigLockShift, TD, TD0, TDav, TE, TE1, TE2, TE3, TE4, TEG, </span>
#&gt; <span class='warning'>    TE_MAGNET, TE_PIDX, TUBE_TYPE, USERA1, USERA2, USERA3, USERA4, </span>
#&gt; <span class='warning'>    USERA5, V9, VALIDCODE, VALIST, VCLIST, VDLIST, VPLIST, VTLIST, </span>
#&gt; <span class='warning'>    WBST, WBSW, XL, YL, YMAX_a, YMIN_a, ZGOPTNS, ZL1, ZL2, ZL3, </span>
#&gt; <span class='warning'>    ZL4))`, with `mutate()` if needed</span></div><div class='output co'>#&gt; <span class='warning'>Warning: unnest() has a new interface. See ?unnest for details.</span>
#&gt; <span class='warning'>Try `df %&gt;% unnest(c(TITLE, JCAMPDX, DATATYPE, NPOINTS, ORIGIN, OWNER, ABSF1, </span>
#&gt; <span class='warning'>    ABSF2, ABSG, ABSL, ALPHA, AQORDER, ASSFAC, ASSFACI, ASSFACX, </span>
#&gt; <span class='warning'>    ASSWID, AUNMP, AXLEFT, AXNAME, AXNUC, AXRIGHT, AXTYPE, AXUNIT, </span>
#&gt; <span class='warning'>    AZFE, AZFW, BCFW, BC_mod, BYTORDP, COROFFS, CY, DATMOD, DC, </span>
#&gt; <span class='warning'>    DFILT, DTYPP, ERETIC, F1P, F2P, FCOR, FTSIZE, FT_mod, GAMMA, </span>
#&gt; <span class='warning'>    GB, INTBC, INTSCL, ISEN, LB, LEV0, LPBIN, MAXI, MC2, MEAN, </span>
#&gt; <span class='warning'>    ME_mod, MI, MddCEXP, MddCT_SP, MddF180, MddLAMBDA, MddMEMORY, </span>
#&gt; <span class='warning'>    MddMERGE, MddNCOMP, MddNITER, MddNOISE, MddPHASE, MddSEED, </span>
#&gt; <span class='warning'>    MddSRSIZE, Mdd_CsALG, Mdd_CsLAMBDA, Mdd_CsNITER, Mdd_CsNORM, </span>
#&gt; <span class='warning'>    Mdd_CsVE, Mdd_CsZF, Mdd_LrLAMBDA, Mdd_LrNITER, Mdd_LrRANK, </span>
#&gt; <span class='warning'>    Mdd_LrZF, Mdd_mod, NCOEF, NC_proc, NLEV, NOISF1, NOISF2, </span>
#&gt; <span class='warning'>    NSP, NTH_PI, NZP, OFFSET, PC, PHC0, PHC1, PH_mod, PKNL, PPARMOD, </span>
#&gt; <span class='warning'>    PPDIAG, PPIPTYP, PPMPNUM, PPRESOL, PSCAL, PSIGN, PYNMP, RDF1, </span>
#&gt; <span class='warning'>    RDF2, RDFWHM, RDINT, RDPOS, REVERSE, SF, SI, SIGF1, SIGF2, </span>
#&gt; <span class='warning'>    SINO, SIOLD, SPECTYP, SREF_mod, SREGLST, SSB, STSI, STSR, </span>
#&gt; <span class='warning'>    SW_p, SYMM, S_DEV, TDeff, TDoff, TI, TILT, TM1, TM2, TOPLEV, </span>
#&gt; <span class='warning'>    USERP1, USERP2, USERP3, USERP4, USERP5, WDW, XDIM, YMAX_p, </span>
#&gt; <span class='warning'>    YMIN_p))`, with `mutate()` if needed</span></div><div class='input'>
<span class='co'># At first we just have the NMRExperiment column</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='nmr_meta_get.html'>nmr_meta_get</a></span>(<span class='no'>nmr_dataset</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='st'>"external"</span>))</div><div class='output co'>#&gt; # A tibble: 4 x 1
#&gt;   NMRExperiment
#&gt;   &lt;chr&gt;        
#&gt; 1 10           
#&gt; 2 20           
#&gt; 3 30           
#&gt; 4 40           </div><div class='input'><span class='co'># Get a table with NMRExperiment -&gt; SubjectID</span>
<span class='no'>dummy_metadata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"dataset-demo"</span>, <span class='st'>"dummy_metadata.xlsx"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"AlpsNMR"</span>)

<span class='no'>nmr_dataset</span> <span class='kw'>&lt;-</span><span class='fu'>nmr_meta_add_tidy_excel</span>(<span class='no'>nmr_dataset</span>, <span class='no'>dummy_metadata</span>)
<span class='co'># Updated Metadata:</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='nmr_meta_get.html'>nmr_meta_get</a></span>(<span class='no'>nmr_dataset</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='st'>"external"</span>))</div><div class='output co'>#&gt; # A tibble: 4 x 4
#&gt;   NMRExperiment SubjectID TimePoint   Age
#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;
#&gt; 1 10            Ana       baseline     29
#&gt; 2 20            Ana       3 months     29
#&gt; 3 30            Elia      baseline      0
#&gt; 4 40            Elia      3 months      0</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ivan Montoliu Roura, Sergio Oller Moreno, Francisco Madrid Gambin, Luis Fernandez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


